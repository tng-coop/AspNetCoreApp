@page
@model AspNetCoreApp.Pages.UploadModel
@{
    ViewData["Title"] = "File Upload";
}

<h2>File Upload</h2>

<form method="post" enctype="multipart/form-data">
    <div class="form-group">
        <label>Select file to upload:</label>
        <input type="file" asp-for="uploadFile" class="form-control" />
    </div>
    <button type="submit" class="btn btn-primary mt-2">Upload</button>
</form>

<button type="button" class="btn btn-secondary mt-3" onclick="showJwtToken()">Show JWT Token</button>

@if (!string.IsNullOrEmpty(Model.Message))
{
    <div class="alert alert-info mt-3">@Model.Message</div>
}

@section Scripts {
    <script>
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        function showJwtToken() {
            const jwtToken = getCookie('jwtToken');
            if (jwtToken) {
                alert('JWT Token: ' + jwtToken);
            } else {
                alert('JWT Token cookie not found.');
            }
        }
    </script>
}

@page "/puzzle"
@rendermode InteractiveServer
@inject IConfiguration Configuration

<PageTitle>Fractal Puzzle (2 pieces)</PageTitle>

@code {
    private string _downloadEndpoint = "";

    protected override void OnInitialized()
    {
        _downloadEndpoint = Configuration["DownloadSettings:Endpoint"]
                            ?? throw new InvalidOperationException("DownloadSettings:Endpoint not configured");
    }

    private string Url(int i) => $"{_downloadEndpoint}/colorful_{i}.png";
}

<svg width="500" height="400" viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <path id="shape1" d="M0,0 L120,20 Q140,40 120,60 L100,100 L20,80 Q-10,40 0,0 Z" />
    <path id="shape2" d="M0,10 L120,0 Q150,40 110,70 L20,90 Q-10,60 0,10 Z" />
    <clipPath id="clip1"><use href="#shape1" /></clipPath>
    <clipPath id="clip2"><use href="#shape2" /></clipPath>
  </defs>

  <g id="puzzle">
    <g transform="translate(0,0)">
      <image
        href="@Url(1)"
        width="250" height="200"
        preserveAspectRatio="xMidYMid slice"
        clip-path="url(#clip1)" />
      <use href="#shape1" fill="none" stroke="#000" stroke-width="2" />
    </g>

    <g transform="translate(200,0)">
      <image
        href="@Url(2)"
        x="-30" y="0"
        width="250" height="200"
        preserveAspectRatio="xMinYMid slice"
        clip-path="url(#clip2)" />
      <use href="#shape2" fill="none" stroke="#000" stroke-width="2" />
    </g>
  </g>
</svg>
